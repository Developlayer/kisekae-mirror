# KisekaeMirror - 着せ替え体験アプリ

Webカメラで人物を認識し、服のイラストをリアルタイムで重ねて表示する着せ替えアプリです。

**🌐 デモサイト**: デプロイ済み（Vercel上で公開中）
**📦 GitHubリポジトリ**: [https://github.com/Developlayer/kisekae-mirror](https://github.com/Developlayer/kisekae-mirror)

## 主な機能

- 📷 **Webカメラ対応** - リアルタイム映像取得
- 🦴 **骨格検出** - MediaPipe Poseによる正確な人物認識
- 👔 **服の読み込み** - ドラッグ&ドロップ / ボタンで簡単に画像を追加
- ✂️ **トリミング機能** - 画像の余白を手動で調整
- 📏 **サイズ調整** - 横幅・縦幅を個別に微調整（50%～200%）
- 🔄 **重ね順設定** - 上半身と下半身の重なり方を選択
- 🐛 **デバッグモード** - 骨格の表示/非表示を切り替え
- 👕 **3種類の服タイプ** - 上半身・下半身・全身に対応

## 使い方

### 1. セットアップと起動

```bash
# 依存パッケージをインストール
npm install

# 開発サーバーを起動
npm run dev
```

ブラウザで `http://localhost:5173` にアクセスします。

### 2. カメラの許可

初回起動時、ブラウザがカメラへのアクセス許可を求めます。「許可」をクリックしてください。

### 3. 服の画像を読み込む

#### 画像の準備
- **背景透過PNG画像**を用意してください
- 服のイラストのみが含まれる画像が最適です

#### 読み込み方法
1. 「画像を選択」ボタンをクリック、またはドラッグ&ドロップ
2. **トリミング画面**が表示されます
   - 四隅や辺のハンドル（緑の四角）をドラッグして範囲を調整
   - 余白を除外してイラスト部分のみを選択
   - 「トリミング確定」をクリック（または「スキップ」で調整なし）
3. 服の種類を選択
   - 上半身（シャツ、ジャケットなど）
   - 下半身（ズボン、スカートなど）
   - 全身（ドレス、つなぎなど）
4. 「確定」をクリック

### 4. 着せ替えを楽しむ

#### 服の着脱
- 読み込んだ服のサムネイルをクリックすると着用/脱衣できます
- 緑の枠が表示されている服が現在着用中です

#### 着用ルール
- ✅ **上半身と下半身**は同時に着用可能
- ⚠️ **全身**は単独のみ（上半身・下半身と同時着用不可）

#### サイズ調整
服を選択すると「サイズ調整」セクション（黄色背景）が表示されます：
- **横幅スライダー**: 50%～200%（5%刻み）
- **縦幅スライダー**: 50%～200%（5%刻み）
- **リセットボタン**: 100%に戻す
- 調整はリアルタイムで反映されます

### 5. その他の設定

#### 表示設定
- **デバッグモード**: チェックONで骨格の線と点を表示
  - 初期状態：OFF（カメラ映像と服のみ表示）

#### 重ね順設定
上半身と下半身を同時着用する場合：
- **上半身を上に**: シャツをパンツに入れる（デフォルト）
- **下半身を上に**: シャツをパンツの上から出す

#### 服の削除
- サムネイル右上の「×」ボタンをクリック

## 技術スタック

- **HTML + Vanilla JavaScript** - シンプルでわかりやすい
- **MediaPipe Pose** - 骨格検出（`@mediapipe/tasks-vision`）
- **Canvas API** - 画像の重ね合わせ
- **Vite** - 開発サーバー

## 推奨環境

- **OS**: macOS / Windows / Linux
- **カメラ**: USB接続のWebカメラ
- **ブラウザ**: Chrome / Edge / Safari（最新版）
- **解像度**: 1280x720以上推奨

## トラブルシューティング

### カメラが映らない
1. ブラウザのカメラ権限を確認
2. 他のアプリがカメラを使用していないか確認
3. ページをリロード

### 骨格検出がうまくいかない
1. デバッグモードをONにして骨格が表示されるか確認
2. カメラから適切な距離を保つ（全身が映る距離）
3. 明るい場所で使用

### 服の位置がずれる
1. トリミング機能で画像の余白を除外
2. サイズ調整機能で横幅・縦幅を調整
3. デバッグモードで骨格の位置を確認

## 今後の拡張予定

- 📸 スクリーンショット機能
- 🎥 録画機能
- 📱 モバイル対応
- 💾 服セットの保存・読み込み
- 🔄 服の回転機能

## ライセンス

MIT

## 開発者向け情報

詳細な開発ログは `DEVELOPMENT-LOG.md` を参照してください。
開発ガイドラインは `CLAUDE.md` を参照してください。
